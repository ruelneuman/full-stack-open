(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(1),o=t(14),c=t.n(o),s=t(3),a=t(4),i=t.n(a),u="/api/persons",d=function(){return i.a.get(u).then((function(e){return e.data}))},l=function(e){return i.a.post(u,e).then((function(e){return e.data}))},f=function(e){return i.a.delete("".concat(u,"/").concat(e.id),e)},j=function(e,n){return i.a.put("".concat(u,"/").concat(e),n).then((function(e){return e.data}))},h=t(0),b=function(e){var n=e.persons,t=e.setPersons,o=e.displayNotification,c=Object(r.useState)(""),a=Object(s.a)(c,2),i=a[0],u=a[1],d=Object(r.useState)(""),f=Object(s.a)(d,2),b=f[0],m=f[1];return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Add Person"}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r={name:i,number:b};n.some((function(e){return e.name===i}))?function(e,r){var c="".concat(r.name," is already added to the phonebook.\nOverwrite the old number with a new one?");window.confirm(c)&&j(e,r).then((function(r){t(n.map((function(n){return n.id!==e?n:r}))),u(""),m(""),o("Changed ".concat(r.name,"'s number to ").concat(r.number),"success")})).catch((function(e){e.response?(console.error(e.response),o(e.response.data.error,"failure")):e.request?console.error(e.request):console.error("Error",e.message),console.error(e.config)}))}(n.find((function(e){return e.name===r.name})).id,r):function(e){l(e).then((function(e){t(n.concat(e)),u(""),m(""),o("Added ".concat(e.name),"success")})).catch((function(e){e.response?(console.error(e.response),o(e.response.data.error,"failure")):e.request?console.error(e.request):console.error("Error",e.message),console.error(e.config)}))}(r)},children:[Object(h.jsxs)("div",{children:["name:",Object(h.jsx)("input",{value:i,onChange:function(e){u(e.target.value)}})]}),Object(h.jsxs)("div",{children:["number:",Object(h.jsx)("input",{value:b,onChange:function(e){m(e.target.value)}})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})]})},m=function(e){var n=e.query,t=e.handleQuery;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Search"}),"search:",Object(h.jsx)("input",{value:n,onChange:t})]})},O=(t(38),function(e){var n=e.notification;if(null===n)return null;var t="notification notification__".concat(n.type);return Object(h.jsx)("div",{className:t,children:n.message})}),p=function(e){var n=e.person,t=e.handleDelete;return Object(h.jsxs)("div",{children:[n.name," ",n.number,Object(h.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]},n.name)},v=function(e){var n=e.filteredPersons,t=e.handleDelete;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Numbers"}),n.map((function(e){return Object(h.jsx)(p,{person:e,handleDelete:t},e.id)}))]})},x=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(""),a=Object(s.a)(c,2),i=a[0],u=a[1],l=Object(r.useState)(null),j=Object(s.a)(l,2),p=j[0],x=j[1];Object(r.useEffect)((function(){d().then((function(e){o(e)}))}),[]);var g=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";x({message:e,type:n}),setTimeout((function(){x(null)}),3e3)},w=t.filter(function(e){return function(n){var t=e.toLowerCase().trim();return n.name.toLowerCase().includes(t)}}(i));return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Phonebook"}),Object(h.jsx)(O,{notification:p}),Object(h.jsx)(m,{query:i,handleQuery:function(e){u(e.target.value)}}),Object(h.jsx)(b,{persons:t,setPersons:o,displayNotification:g}),Object(h.jsx)(v,{filteredPersons:w,handleDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&f(e).then((function(){o(t.filter((function(n){return n.id!==e.id}))),g("Removed ".concat(e.name),"success")})).catch((function(n){n.response?(404===n.response.status&&(o(t.filter((function(n){return n.id!==e.id}))),console.warn("".concat(e.name," was already removed from the server")),g("".concat(e.name," was already removed from the server"),"failure")),console.error(n.response)):n.request?console.error(n.request):console.error("Error",n.message),console.error(n.config)}))}})]})};c.a.render(Object(h.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.41b0bf33.chunk.js.map